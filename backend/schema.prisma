// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
}

model Device {
  id           String        @id @default(cuid())
  name         String        @unique @default("")
  ubication    String        @default("")
  date_add     DateTime?     @default(now())
  plant        Plant[]       @relation("Plant_device")
  measurements Measurement[] @relation("Measurement_device")
  images       UrlImage[]    @relation("UrlImage_device")
  guestUser    GuestUser[]   @relation("GuestUser_device")
}

model GuestUser {
  id       String  @id @default(cuid())
  id_azure String  @unique @default("")
  device   Device? @relation("GuestUser_device", fields: [deviceId], references: [id])
  deviceId String? @map("device")
  name     String  @default("")
  email    String  @unique @default("")

  @@index([deviceId])
}

model Measurement {
  id                String          @id @default(cuid())
  date_add          DateTime?       @default(now())
  temperature       Float?
  humidity          Float?
  light             Float?
  plant             Plant?          @relation("Measurement_plant", fields: [plantId], references: [id])
  plantId           String?         @map("plant")
  device            Device?         @relation("Measurement_device", fields: [deviceId], references: [id])
  deviceId          String?         @map("device")
  image             UrlImage?       @relation("Measurement_image", fields: [imageId], references: [id])
  imageId           String?         @map("image")
  recommendations   Recommendation? @relation("Measurement_recommendations", fields: [recommendationsId], references: [id])
  recommendationsId String?         @map("recommendations")

  @@index([plantId])
  @@index([deviceId])
  @@index([imageId])
  @@index([recommendationsId])
}

model Plant {
  id           String        @id @default(cuid())
  name         String        @default("")
  date_add     DateTime?     @default(now())
  device       Device?       @relation("Plant_device", fields: [deviceId], references: [id])
  deviceId     String?       @map("device")
  measurements Measurement[] @relation("Measurement_plant")

  @@index([deviceId])
}

model Recommendation {
  id          String        @id @default(cuid())
  description String        @default("")
  date_add    DateTime?     @default(now())
  measurement Measurement[] @relation("Measurement_recommendations")
  image       UrlImage?     @relation("Recommendation_image", fields: [imageId], references: [id])
  imageId     String?       @unique @map("image")
}

model UrlImage {
  id             String          @id @default(cuid())
  url_image      String          @default("")
  date_add       DateTime?       @default(now())
  device         Device?         @relation("UrlImage_device", fields: [deviceId], references: [id])
  deviceId       String?         @map("device")
  mesurement     Measurement[]   @relation("Measurement_image")
  recommendation Recommendation? @relation("Recommendation_image")

  @@index([deviceId])
}
